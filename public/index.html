<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:image" content="https://path2rebirth-map.pages.dev/images/penguin1.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="600" />
  <title>メニュー | 再生の道 進捗マップ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container-sm my-5">
    <div class="col-lg-12 px-0">
      <nav class="mb-4 d-flex align-items-start">
        <a href="about.html" class="btn btn-outline-secondary me-2">当サイトについて</a>
      </nav>
      
      <div id="penguin-image" style="text-align: center; margin-bottom: 1rem; display: none;">
        <img src="https://path2rebirth-map.pages.dev/images/penguin1.png" alt="ペンギン" style="height: 100px; width: auto;">
      </div>

      <ul class="nav nav-tabs mb-4" id="progressMapTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="volunteer-tab" data-bs-toggle="tab" data-bs-target="#volunteer-section"
          type="button" role="tab" aria-controls="volunteer-section" aria-selected="true">
          ボランティア
        </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="poster-tab" data-bs-toggle="tab" data-bs-target="#poster-section"
          type="button" role="tab" aria-controls="poster-section" aria-selected="false">
          ポスター
        </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="flyer-tab" data-bs-toggle="tab" data-bs-target="#flyer-section" type="button" role="tab" aria-controls="flyer-section" aria-selected="false">
            ビラ配布
          </button>
        </li>
      </ul>
      
      
      <div class="tab-content" id="progressMapTabsContent">
        <!-- ボランティア募集内容（デフォルトで表示） -->
        <div class="tab-pane fade show active" id="volunteer-section" role="tabpanel" aria-labelledby="volunteer-tab">
          <p>ボランティアを募集中です。下記の外部サイトよりご登録できます。</p>
          <div class="tab-pane fade show active" id="volunteer-section" role="tabpanel" aria-labelledby="volunteer-tab">
            <h4 class="mb-3">東京選挙区（吉田さん）</h4>
            <div class="row row-cols-1 row-cols-md-2 g-3 mb-4">
              <div class="col">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLScLKciWeRATgk53cAR7cWoofdQiij-ZMOF9GyivfabxXu4OfA/viewform" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-primary">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">チーム江戸川</h5>
                    </div>
                  </div>
                </a>
              </div>

              <div class="col">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfV4gkQsSFAKwOXwN1i35e0QyUMZw8P_hsVj02eBny2KfTaWQ/viewform" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-primary">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">チーム新宿</h5>
                    </div>
                  </div>
                </a>
              </div>
            
              <div class="col">
                <a href="https://t.co/s8IS2wL56w" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-primary">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">チーム中野</h5>
                    </div>
                  </div>
                </a>
              </div>

              <div class="col">
                  <a href="https://docs.google.com/forms/d/e/1FAIpQLSe4cE6EPkSp3UH6YkpeMTIDxTp4ZM2qzCHl7CNpcuy4MRaoEg/viewform" class="text-decoration-none">
                    <div class="card shadow-sm h-100 border-primary">
                      <div class="card-body text-center">
                        <h5 class="card-title mb-0">チーム板橋/北/練馬</h5>
                      </div>
                    </div>
                  </a>
              </div>

              <div class="col">
                  <a href="https://t.co/1rV9p6XONF" class="text-decoration-none">
                    <div class="card shadow-sm h-100 border-primary">
                      <div class="card-body text-center">
                        <h5 class="card-title mb-0">陣営本部 (ポスター貼り 7/3木)</h5>
                      </div>
                    </div>
                  </a>
              </div>

              <div class="col">
                  <a href="https://t.co/whGhsfbeG7" class="text-decoration-none">
                    <div class="card shadow-sm h-100 border-primary">
                      <div class="card-body text-center">
                        <h5 class="card-title mb-0">陣営本部 (街頭演説補助)</h5>
                      </div>
                    </div>
                  </a>
              </div>


            </div>
          
            <h4 class="mb-3">全国比例区</h4>
            <div class="row row-cols-1 row-cols-md-2 g-3">
              <div class="col">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfCKRek4XHPoXzehC3vJyaiG3oRA21Rte0bEQEvPoT2kN5Yyw/viewform" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-success">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">小林さん</h5>
                    </div>
                  </div>
                </a>
              </div>
              <div class="col">
                <a href="https://t.co/H81d52cpVC" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-success">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">横山さん</h5>
                    </div>
                  </div>
                </a>
              </div>
              <div class="col">
                <a href="https://t.co/XGPUe5DAfU" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-success">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">浦野さん</h5>
                    </div>
                  </div>
                </a>
              </div>

              <div class="col">
                <a href="https://line.me/ti/g2/sXQ_93ozN65ZtJMhBuQWQ3rXWoVv9yWpE60qEQ?utm_source=invitation&utm_medium=link_copy&utm_campaign=default" class="text-decoration-none">
                  <div class="card shadow-sm h-100 border-success">
                    <div class="card-body text-center">
                      <h5 class="card-title mb-0">木島さん</h5>
                    </div>
                  </div>
                </a>
              </div>

            </div>
          </div>
        </div>
        <!-- ポスター掲示進捗マップ -->
        <div class="tab-pane fade" id="poster-section" role="tabpanel" aria-labelledby="poster-tab">
          <h3 class="mb-4">再生の道 ポスター掲示進捗マップ</h3>
          <div id="poster-candidate-list" class="row row-cols-2 g-3 mb-4">
            <!-- ポスター候補者ボタン -->
          </div>
        </div>
      
        <!-- ビラ配布進捗マップ -->
        <div class="tab-pane fade" id="flyer-section" role="tabpanel" aria-labelledby="flyer-tab">
          <h3 class="mb-4">参議院議員選挙 2025</h3>
          <div id="prefecture-list" class="row row-cols-2 g-3 mb-4">
            <!-- ビラ候補者ボタン -->
          </div>
        </div>
      </div>
      

      
    </div>
  </div>
  
  <script>
    // 表示対象とする区のリスト（今後ここを編集するだけでOK）
    const targetDistricts = ["新宿区", "八王子市", "島部","府中市","中央区"];
  
async function poster_loadCandidates() {
  const response = await fetch('data/candidates_all.json');
  const candidates = await response.json();
  const list = document.getElementById('poster-candidate-list');

  // 重複防止用セット
  const displayedSet = new Set();

  candidates.forEach(candidate => {
    const district = candidate.district;
    const name = candidate.name;
    const lastName = name.split(' ')[0];
    const isGroup = candidate.group === "True";

    if (!targetDistricts.includes(district)) return;

    // 重複防止キーの作り方変更
    const key = isGroup
      ? `${district}_group`
      : `${district}_${name}`;

    // すでに表示済みならスキップ
    if (displayedSet.has(key)) return;
    displayedSet.add(key);

    // UI 作成
    const col = document.createElement('div');
    col.className = 'col';

    const card = document.createElement('div');
    card.className = 'border rounded p-3 h-100 d-flex align-items-center justify-content-center bg-light shadow-sm text-center';
    card.style.cursor = 'pointer';
    card.textContent = `${district}: ${isGroup ? '全体' : lastName}`;

    card.onclick = () => {
      const url = isGroup
        ? `map/poster_map.html?district=${district}&name=グループ`
        : `map/poster_map.html?district=${district}&name=${lastName}`;

      window.location.href = url;
    };

    col.appendChild(card);
    list.appendChild(col);
  });
}

async function flyer_loadPrefectures() {
  const response = await fetch('data/prefecture.json');
  const prefectures = await response.json();
  const list = document.getElementById("prefecture-list");

  // 表示対象 → 当面は宮城、京都だけ "京都府", "広島県", "長野県"
  const targetPrefectures = [];

  // id順にソート
  const sortedPrefectures = Object.entries(prefectures)
    .sort((a, b) => (a[1].id || 999) - (b[1].id || 999));

  sortedPrefectures.forEach(([prefName, prefData]) => {
    // targetPrefectures に含まれないものはスキップ
    if (!targetPrefectures.includes(prefData.prefecture)) return;

    const col = document.createElement('div');
    col.className = 'col';

    const card = document.createElement('div');
    card.className = 'border rounded p-3 h-100 d-flex align-items-center justify-content-center bg-light shadow-sm text-center';
    card.style.cursor = 'pointer';
    card.textContent = `${prefData.id}. ${prefData.prefecture}`;

    card.onclick = () => {
      const url = `map/flyer_map.html?prefecture=${encodeURIComponent(prefData.prefecture)}`;
      window.location.href = url;
    };

    col.appendChild(card);
    list.appendChild(col);
  });
}


// ビラ配布用
poster_loadCandidates();
// ビラ配布用のボタン読み込み
flyer_loadPrefectures();

  

  </script>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
